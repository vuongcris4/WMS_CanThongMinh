{% extends 'base.html' %}

{% block content %}
    <h1>Tồn kho</h1>
    <a href="{% url 'add_transaction' %}">Thêm giao dịch</a>
    <br>
    <table>
        <thead>
        <tr>
            <th>Tên</th>
            <th>Tồn kho</th>
            <th>Đơn vị</th>
        </tr>
        </thead>
        <tbody>
        {% for material in materials %}
            <tr>
                <td>{{ material.name }}</td>
                <td id="quantity-{{ material.id }}">{{ material.inventory_level }}</td>
                <td>
                    <select
                            name="unit_id"
                            hx-get="{% url 'get_inventory_in_unit' material.id %}"
                            hx-trigger="change"
                            hx-target="#quantity-{{ material.id }}"
                            hx-swap="innerHTML"
                    >
                        {% for mu in material.units.all %}
                            <option value="{{ mu.id }}"
                                    {% if mu == material.base_unitId %}selected{% endif %}>{{ mu.name }}
                            </option>
                        {% endfor %}
                    </select>
                </td>

                <td>

                </td>

            </tr>
        {% endfor %}
        </tbody>
    </table>
    <br>
    <a href="{% url 'transaction_history' %}">Lịch sử nhập xuất</a>
{% endblock %}